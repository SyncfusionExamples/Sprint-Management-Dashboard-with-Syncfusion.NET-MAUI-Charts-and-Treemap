<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:chart="clr-namespace:Syncfusion.Maui.Toolkit.Charts;assembly=Syncfusion.Maui.Toolkit"
             xmlns:treemap="clr-namespace:Syncfusion.Maui.TreeMap;assembly=Syncfusion.Maui.TreeMap"
             xmlns:inputs="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
             x:Class="SprintManagementDashboardSample.Views.MobilePage"
             Shell.NavBarIsVisible="False"
             Background="#164f87">

    <ScrollView>
        <VerticalStackLayout Padding="12" Spacing="12">
            <Border Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <HorizontalStackLayout>
                    <Grid>
                        <Path Data="M14.495536,2.4970052C14.995542,2.497005,15.394548,2.6970062,15.794561,3.0960097L15.894554,3.1960082 15.994561,3.1960082 16.193553,3.3960097 24.084649,11.38603 29.07871,6.5920179C29.378716,6.2920177 29.877715,6.0930159 30.277715,6.1930187 30.676721,6.1930187 31.175734,6.3920166 31.475741,6.7920191 32.174739,7.4910223 32.174739,8.5900242 31.475741,9.1890252L25.183661,15.282046C24.583648,15.881046,23.58565,15.881046,22.885631,15.282046L22.686639,15.182046C22.486625,15.08204,22.286626,14.882042,22.186633,14.782044L19.290589,11.786033 16.893573,14.183043 23.684651,21.075061C24.483657,21.874059 24.583648,23.172067 23.784644,23.872066 23.485644,24.171071 23.085645,24.371068 22.586631,24.371068L22.386632,24.371068 22.286626,24.371068 12.897526,24.371068C11.898506,24.371068 11.099501,23.57207 11.099501,22.573066 11.099501,21.574064 11.898506,20.775058 12.897526,20.775058L18.191577,20.775058 14.196536,16.680043 3.1094041,27.86708C2.4104059,28.566079 1.211387,28.666078 0.51237378,27.967078 -0.18662398,27.26708 -0.18662398,26.06907 0.61238126,25.370071L16.693559,9.2890246 16.793567,9.1890252 14.395544,6.7920191 9.5014753,11.486029C8.8024769,12.086037 7.7034659,12.086037 7.1044597,11.38603 6.4054465,10.687031 6.4054465,9.5890276 7.1044597,8.9890282L13.197532,3.0960097 13.297523,2.996007 13.397531,2.8970075C13.69653,2.5970075,14.096529,2.497005,14.495536,2.4970052z M23.185637,0C25.083653,-3.7247446E-08 26.68168,1.5980041 26.68168,3.4960081 26.68168,5.3940165 25.083653,6.9920204 23.185637,6.9920204 21.287621,6.9920204 19.689595,5.3940165 19.689595,3.4960081 19.589602,1.5980041 21.187613,-3.7247446E-08 23.185637,0z" 
                              Fill="#FFF5F5F5" WidthRequest="35" HeightRequest="30" Margin="0,5,15,5"/>
                    </Grid>
                    <Label Text="Sprint Management Dashboard" Padding="0,5,0,0" FontAttributes="Bold" FontSize="20" TextColor="White" />
                </HorizontalStackLayout>
            </Border>

            <Grid ColumnDefinitions="*,*" RowDefinitions="140,170" ColumnSpacing="12" RowSpacing="12">
                <Border x:Name="SprintCard" Grid.Row="0" Grid.Column="0" Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="6" VerticalOptions="Center">
                        <Label Text="Sprints" TextColor="White" HorizontalTextAlignment="Center"/>
                        <inputs:SfComboBox
                            ItemsSource="{Binding Sprints}"
                            SelectedItem="{Binding SelectedSprint}"
                            IsClearButtonVisible="False"
                            WidthRequest="150"
                            HeightRequest="40"
                            TextColor="White"
                            Background="#276098"
                            BackgroundColor="#276098"
                            FontSize="12"
                            Placeholder="Select sprint"/>
                    </VerticalStackLayout>
                </Border>

                <Border x:Name="HoursCard" Grid.Row="0" Grid.Column="1" Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout Spacing="6" VerticalOptions="Center">
                        <Label Text="Total Worked Hours" TextColor="White" HorizontalTextAlignment="Center"/>
                        <Label Text="{Binding TotalWorkedHours, StringFormat='{}{0} hrs'}" 
                               FontSize="18" FontAttributes="Bold" TextColor="White" 
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </Border>

                <Border x:Name="TasksCard" Grid.Row="1" Grid.Column="0" Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout VerticalOptions="Center">
                        <Label Text="Tasks" TextColor="White" FontSize="16" HorizontalTextAlignment="Center" Margin="0,0,0,12"/>
                        <Grid ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="{Binding TasksCompleted}" HorizontalTextAlignment="Center" FontSize="18" FontAttributes="Bold" TextColor="White" Margin="0,0,0,6"/>
                                <Label Text="Completed" TextColor="White" HorizontalTextAlignment="Center" FontSize="12"/>
                            </VerticalStackLayout>
                            <BoxView Grid.Column="1" WidthRequest="1.5" BackgroundColor="#E0E0E0"/>
                            <VerticalStackLayout Grid.Column="2">
                                <Label Text="{Binding TasksAssigned}" HorizontalTextAlignment="Center" FontSize="18" FontAttributes="Bold" TextColor="White" Margin="0,0,0,6"/>
                                <Label Text="Assigned" TextColor="White" HorizontalTextAlignment="Center" FontSize="12"/>
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>

                <Border x:Name="StoryPointsCard" Grid.Row="1" Grid.Column="1" Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="12"/>
                    </Border.StrokeShape>
                    <VerticalStackLayout VerticalOptions="Center">
                        <Label Text="Story Points" TextColor="White" FontSize="16" HorizontalTextAlignment="Center" Margin="0,0,0,12"/>
                        <Grid ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="{Binding StoryPointsCompleted}" HorizontalTextAlignment="Center" FontSize="18" FontAttributes="Bold" TextColor="White" Margin="0,0,0,6"/>
                                <Label Text="Completed" TextColor="White" HorizontalTextAlignment="Center" FontSize="12"/>
                            </VerticalStackLayout>
                            <BoxView Grid.Column="1" WidthRequest="1.5" BackgroundColor="#E0E0E0"/>
                            <VerticalStackLayout Grid.Column="2">
                                <Label Text="{Binding StoryPointsPlanned}" HorizontalTextAlignment="Center" FontSize="18" FontAttributes="Bold" TextColor="White" Margin="0,0,0,6"/>
                                <Label Text="Planned" TextColor="White" HorizontalTextAlignment="Center" FontSize="12"/>
                            </VerticalStackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </Border>
            </Grid>

            <ScrollView Orientation="Horizontal" HorizontalScrollBarVisibility="Always">
                <HorizontalStackLayout Spacing="12">
                    <Border Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1" WidthRequest="370">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <VerticalStackLayout>
                            <Label Text="Tasks by Status" TextColor="White" FontAttributes="Bold"/>
                            <chart:SfCircularChart HeightRequest="305">
                                <chart:SfCircularChart.Legend>
                                    <chart:ChartLegend IsVisible="True" Placement="Bottom" ToggleSeriesVisibility="True">
                                        <chart:ChartLegend.LabelStyle>
                                            <chart:ChartLegendLabelStyle TextColor="White"/>
                                        </chart:ChartLegend.LabelStyle>
                                        <chart:ChartLegend.ItemsLayout>
                                            <FlexLayout WidthRequest="300" HeightRequest="100" Direction="Column" Wrap="Wrap" AlignItems="Center" AlignContent="Center" VerticalOptions="Start" HorizontalOptions="Start"/>
                                        </chart:ChartLegend.ItemsLayout>
                                    </chart:ChartLegend>
                                </chart:SfCircularChart.Legend>
                                <chart:SfCircularChart.Resources>
                                    <DataTemplate x:Key="labelTemplate">
                                        <HorizontalStackLayout Spacing="5">
                                            <Label TextColor="White" FontSize="10">
                                                <Label.Text>
                                                    <MultiBinding StringFormat="{}{0} ({1})">
                                                        <Binding Path="Item.Status"/>
                                                        <Binding Path="Item.Count"/>
                                                    </MultiBinding>
                                                </Label.Text>
                                            </Label>
                                        </HorizontalStackLayout>
                                    </DataTemplate>
                                </chart:SfCircularChart.Resources>
                                <chart:PieSeries ItemsSource="{Binding TaskStatus}"
                                                 XBindingPath="Status"
                                                 YBindingPath="Count"
                                                 PaletteBrushes="{Binding CustomBrushes}"
                                                 Radius="0.8"
                                                 IsVisibleOnLegend="True"
                                                 ShowDataLabels="True"
                                                 LegendIcon = "Diamond"
                                                 EnableTooltip="True"
                                                 LabelTemplate="{StaticResource labelTemplate}">
                                    <chart:PieSeries.DataLabelSettings>
                                        <chart:CircularDataLabelSettings LabelPosition="Outside" />
                                    </chart:PieSeries.DataLabelSettings>
                                </chart:PieSeries>
                            </chart:SfCircularChart>
                        </VerticalStackLayout>
                    </Border>

                    <Border Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1" WidthRequest="370">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <VerticalStackLayout>
                            <Label Text="Task Type Breakdown" TextColor="White" FontAttributes="Bold"/>
                            <chart:SfCartesianChart HeightRequest="290">
                                <chart:SfCartesianChart.Legend>
                                    <chart:ChartLegend ToggleSeriesVisibility="True">
                                        <chart:ChartLegend.LabelStyle>
                                            <chart:ChartLegendLabelStyle TextColor="White"/>
                                        </chart:ChartLegend.LabelStyle>
                                    </chart:ChartLegend>
                                </chart:SfCartesianChart.Legend>
                                <chart:SfCartesianChart.XAxes>
                                    <chart:CategoryAxis TickPosition="Inside" ShowMajorGridLines="False">
                                        <chart:CategoryAxis.LabelStyle>
                                            <chart:ChartAxisLabelStyle TextColor="White"/>
                                        </chart:CategoryAxis.LabelStyle>
                                    </chart:CategoryAxis>
                                </chart:SfCartesianChart.XAxes>
                                <chart:SfCartesianChart.YAxes>
                                    <chart:NumericalAxis TickPosition="Inside">
                                        <chart:NumericalAxis.LabelStyle>
                                            <chart:ChartAxisLabelStyle TextColor="White"/>
                                        </chart:NumericalAxis.LabelStyle>
                                    </chart:NumericalAxis>
                                </chart:SfCartesianChart.YAxes>
                                <chart:ColumnSeries ItemsSource="{Binding TaskTypes}" XBindingPath="Type" LegendIcon="SeriesType" EnableTooltip="True" Fill="#87d0f5" YBindingPath="Planned" Label="Planned Tasks" Spacing="0.2" ShowDataLabels="True"/>
                                <chart:ColumnSeries ItemsSource="{Binding TaskTypes}" XBindingPath="Type" EnableTooltip="True" Fill="#3cad67" LegendIcon="SeriesType" YBindingPath="Completed" Label="Completed Tasks" Spacing="0.2" ShowDataLabels="True"/>
                            </chart:SfCartesianChart>
                        </VerticalStackLayout>
                    </Border>

                    <Border Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1" WidthRequest="370">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <VerticalStackLayout>
                            <Label Text="Scope Changes (Full Sprint Cycle)" TextColor="White" FontAttributes="Bold"/>
                            <chart:SfCartesianChart HeightRequest="290">
                                <chart:SfCartesianChart.Legend>
                                    <chart:ChartLegend ToggleSeriesVisibility="True">
                                        <chart:ChartLegend.LabelStyle>
                                            <chart:ChartLegendLabelStyle TextColor="White"/>
                                        </chart:ChartLegend.LabelStyle>
                                    </chart:ChartLegend>
                                </chart:SfCartesianChart.Legend>
                                <chart:SfCartesianChart.XAxes>
                                    <chart:CategoryAxis TickPosition="Inside" ShowMajorGridLines="False">
                                        <chart:CategoryAxis.LabelStyle>
                                            <chart:ChartAxisLabelStyle TextColor="White"/>
                                        </chart:CategoryAxis.LabelStyle>
                                    </chart:CategoryAxis>
                                </chart:SfCartesianChart.XAxes>
                                <chart:SfCartesianChart.YAxes>
                                    <chart:NumericalAxis TickPosition="Inside">
                                        <chart:NumericalAxis.LabelStyle>
                                            <chart:ChartAxisLabelStyle TextColor="White"/>
                                        </chart:NumericalAxis.LabelStyle>
                                    </chart:NumericalAxis>
                                </chart:SfCartesianChart.YAxes>
                                <chart:ColumnSeries ItemsSource="{Binding ScopeChanges}" EnableTooltip="True" LegendIcon="SeriesType" Fill="#87d0f5" XBindingPath="SprintName" YBindingPath="Planned" Label="Planned"/>
                                <chart:ColumnSeries ItemsSource="{Binding ScopeChanges}" EnableTooltip="True" LegendIcon="SeriesType" Fill="#f1c40f" XBindingPath="SprintName" YBindingPath="Added" Label="Added"/>
                                <chart:ColumnSeries ItemsSource="{Binding ScopeChanges}" EnableTooltip="True" LegendIcon="SeriesType" Fill="#855ec2" XBindingPath="SprintName" YBindingPath="Removed" Label="Removed"/>
                            </chart:SfCartesianChart>
                        </VerticalStackLayout>
                    </Border>

                    <Border Padding="12" Background="#276098" Stroke="#276098" StrokeThickness="1" WidthRequest="370">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <VerticalStackLayout>
                            <Label Text="Incomplete Tasks by Project and Priority" TextColor="White" Padding="0,0,0,8" FontAttributes="Bold"/>
                            <treemap:SfTreeMap HeightRequest="220" DataSource="{Binding IncompleteTasks}" PrimaryValuePath="Count">
                                <treemap:SfTreeMap.LeafItemBrushSettings>
                                    <treemap:TreeMapPaletteBrushSettings>
                                        <treemap:TreeMapPaletteBrushSettings.Brushes>
                                            <SolidColorBrush>#4caf4f</SolidColorBrush>
                                            <SolidColorBrush>#ffa600</SolidColorBrush>
                                            <SolidColorBrush>#ed5f4f</SolidColorBrush>
                                        </treemap:TreeMapPaletteBrushSettings.Brushes>
                                    </treemap:TreeMapPaletteBrushSettings>
                                </treemap:SfTreeMap.LeafItemBrushSettings>
                                <treemap:SfTreeMap.LeafItemSettings>
                                    <treemap:TreeMapLeafItemSettings LabelPath="Label" />
                                </treemap:SfTreeMap.LeafItemSettings>
                            </treemap:SfTreeMap>
                        </VerticalStackLayout>
                    </Border>
                </HorizontalStackLayout>
            </ScrollView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
